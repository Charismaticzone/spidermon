RUNNING ACTION: finish reason is ok!
====================================================
MONITOR REPORT: A. Monitor from parameters
====================================================
_____________________ checks _______________________

------------------------------------
 RULE      TYPE      LEVEL   STATE
------------------------------------
 <lambda>  callable  NORMAL  PASSED
 <lambda>  callable  NORMAL  PASSED
------------------------------------
 TOTAL: 2
PASSED: 2
FAILED: 0
ERRORS: 0

____________________ actions _______________________

--------------------------------------------------------
 ACTION         TYPE           TRIGGER_STATE  STATE
--------------------------------------------------------
 MessageAction  MessageAction  ALWAYS         PROCESSED
--------------------------------------------------------
    TOTAL: 1
PROCESSED: 1
  SKIPPED: 0
   ERRORS: 0

====================================================






RUNNING ACTION: finish reason is ok!
====================================================
MONITOR REPORT: B. Adding rules and actions
====================================================
_____________________ checks _______________________

------------------------------------
 RULE      TYPE      LEVEL   STATE
------------------------------------
 <lambda>  callable  NORMAL  PASSED
------------------------------------
 TOTAL: 1
PASSED: 1
FAILED: 0
ERRORS: 0

____________________ actions _______________________

--------------------------------------------------------
 ACTION         TYPE           TRIGGER_STATE  STATE
--------------------------------------------------------
 MessageAction  MessageAction  ALWAYS         PROCESSED
--------------------------------------------------------
    TOTAL: 1
PROCESSED: 1
  SKIPPED: 0
   ERRORS: 0

====================================================






RUNNING ACTION: hi there!
====================================================
MONITOR REPORT: C. Monitor without rules
====================================================
_____________________ checks _______________________

No rules defined

____________________ actions _______________________

--------------------------------------------------------
 ACTION         TYPE           TRIGGER_STATE  STATE
--------------------------------------------------------
 MessageAction  MessageAction  ALWAYS         PROCESSED
--------------------------------------------------------
    TOTAL: 1
PROCESSED: 1
  SKIPPED: 0
   ERRORS: 0

====================================================






====================================================
MONITOR REPORT: D. All rule type definitions
====================================================
_____________________ checks _______________________

------------------------------------------------------
 RULE               TYPE               LEVEL   STATE
------------------------------------------------------
 <lambda>           callable           NORMAL  PASSED
 python_expression  python_expression  NORMAL  PASSED
 rule_as_function   callable           NORMAL  PASSED
 rule               rule               NORMAL  PASSED
 ATestCase.test_a   test_case          NORMAL  PASSED
 ATestCase.test_b   test_case          NORMAL  PASSED
------------------------------------------------------
 TOTAL: 6
PASSED: 6
FAILED: 0
ERRORS: 0

____________________ actions _______________________

----------------------------------------------------
 ACTION       TYPE         TRIGGER_STATE  STATE
----------------------------------------------------
 DummyAction  DummyAction  ALWAYS         PROCESSED
----------------------------------------------------
    TOTAL: 1
PROCESSED: 1
  SKIPPED: 0
   ERRORS: 0

====================================================






====================================================
MONITOR REPORT: E. Naming rules and actions
====================================================
_____________________ checks _______________________

----------------------------------
 RULE    TYPE      LEVEL   STATE
----------------------------------
 Rule 1  callable  NORMAL  PASSED
 Rule 2  callable  NORMAL  PASSED
 Rule 3  callable  NORMAL  PASSED
----------------------------------
 TOTAL: 3
PASSED: 3
FAILED: 0
ERRORS: 0

____________________ actions _______________________

-------------------------------------------------
 ACTION    TYPE         TRIGGER_STATE  STATE
-------------------------------------------------
 Action 1  DummyAction  ALWAYS         PROCESSED
 Action 2  DummyAction  ALWAYS         PROCESSED
-------------------------------------------------
    TOTAL: 2
PROCESSED: 2
  SKIPPED: 0
   ERRORS: 0

====================================================






====================================================
MONITOR REPORT: F. Rule levels and action triggers
====================================================
_____________________ checks _______________________

------------------------------------------------
 RULE         TYPE               LEVEL   STATE
------------------------------------------------
 Rule High    python_expression  HIGH    PASSED
 Rule Normal  python_expression  NORMAL  FAILED
 Rule Low     python_expression  LOW     FAILED
 Rule Low 2   callable           LOW     PASSED
------------------------------------------------
 TOTAL: 4
PASSED: 2
FAILED: 2
ERRORS: 0

____________________ actions _______________________

--------------------------------------------------------------
 ACTION                 TYPE         TRIGGER_STATE  STATE
--------------------------------------------------------------
 Action runs on passed  DummyAction  PASSED         PROCESSED
 Action on passed       DummyAction  PASSED         PROCESSED
 Action runs on failed  DummyAction  FAILED         PROCESSED
 Action runs on error   DummyAction  ERROR          SKIPPED
 Action runs always     DummyAction  ALWAYS         PROCESSED
 Action runs always     DummyAction  ALWAYS         PROCESSED
--------------------------------------------------------------
    TOTAL: 6
PROCESSED: 5
  SKIPPED: 1
   ERRORS: 0

====================================================






====================================================
MONITOR REPORT: G. Rule and Action Errors
====================================================
_____________________ checks _______________________

-----------------------------------------------------
 RULE               TYPE               LEVEL   STATE
-----------------------------------------------------
 python_expression  python_expression  NORMAL  ERROR
-----------------------------------------------------
 TOTAL: 1
PASSED: 0
FAILED: 0
ERRORS: 1

_________________ check errors _____________________

RULE: python_expression
TYPE: python_expression
ERROR: Stats key 'a_non_existing_key' not found.
TRACEBACK: Traceback (most recent call last):
  File "/Users/javi/scrapinghub/spidermon/spidermon/rules/managers.py", line 38, in _check_rule
    check_result = definition.rule.run_check(stats)
  File "/Users/javi/scrapinghub/spidermon/spidermon/rules/__init__.py", line 26, in run_check
    return bool(self.check(**context_params))
  File "/Users/javi/scrapinghub/spidermon/spidermon/rules/__init__.py", line 69, in check
    return self.interpreter.eval(self.expression, context_params)
  File "/Users/javi/scrapinghub/spidermon/spidermon/python.py", line 57, in eval
    return eval(expression, context)
  File "<string>", line 1, in <module>
  File "/Users/javi/scrapinghub/spidermon/spidermon/stats.py", line 43, in __getattr__
    raise AttributeError("Stats key '%s' not found." % name)
AttributeError: Stats key 'a_non_existing_key' not found.


____________________ actions _______________________

---------------------------------------------------
 ACTION           TYPE        TRIGGER_STATE  STATE
---------------------------------------------------
 Action on error  BombAction  ERROR          ERROR
---------------------------------------------------
    TOTAL: 1
PROCESSED: 0
  SKIPPED: 0
   ERRORS: 1

_________________ action errors ____________________

ACTION: Action on error
TRIGGER: ERROR
ERROR: Boom!
TRACEBACK: Traceback (most recent call last):
  File "/Users/javi/scrapinghub/spidermon/spidermon/actions/managers.py", line 92, in _run_action
    definition.action.run(result)
  File "/Users/javi/scrapinghub/spidermon/examples/monitors.py", line 143, in run
    raise Exception('Boom!')
Exception: Boom!


====================================================
